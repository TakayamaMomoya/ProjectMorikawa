//*****************************************************
//
// ゲーム処理[game.h]
// Author:髙山桃也
//
//*****************************************************
#ifndef _GAME_H_
#define _GAME_H_

//*****************************************************
// インクルード
//*****************************************************
#include "main.h"
#include "scene.h"

//*****************************************************
// 前方宣言
//*****************************************************
class CScore;
class CTimer;
class CPlayer;
class CGame;
class CBlockManager;
class CMultiBg;
class CNumber;
class CObject2D;

//*****************************************************
// クラスの定義
//*****************************************************
class CGame : public CScene
{
public:
	enum STATE
	{// 状態
		STATE_NONE,	// 何もしていない状態
		STATE_NORMAL,	// 通常状態
		STATE_RESULT,	// リザルト状態
		STATE_END,	// 終了状態
		STATE_MAX
	};

	CGame();	// コンストラクタ
	~CGame();	// デストラクタ

	virtual HRESULT Init(void);
	virtual void Uninit(void);
	virtual void Update();
	virtual void Draw();
	static CScore *GetScore(void) { return m_pScore; }
	static CTimer *GetTimer(void) { return m_pTimer; }
	static CPlayer *GetPlayer(void) { return m_pPlayer; }
	static CBlockManager *GetBlockManager(void) { return m_pBlockManager; }
	static void ReleaseScore(void);
	static void ReleaseTimer(void);
	static void SetState(STATE state) { m_state = state; }
	static STATE GetState(void) { return m_state; }
	static float GetGameSpeed(void) { return m_fGameSpeed; }

private:
	void ManageSpeed(void);

	static CScore *m_pScore;	// スコアのポインタ
	static CTimer *m_pTimer;	// タイマーのポインタ
	static CPlayer *m_pPlayer;	// プレイヤーのポインタ
	static CBlockManager *m_pBlockManager;	//ブロックマネージャ
	static CMultiBg *m_pMultiBg;
	static CObject2D* m_pResult;	//リザルト文字
	static CNumber* m_pResultScore;	//リザルトのスコア
	static STATE m_state;	// 状態
	static float m_fGameSpeed;	// ゲームのスピード
	int m_nCntSecond;	// 一秒カウンター
};

#endif